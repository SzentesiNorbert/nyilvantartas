{"remainingRequest":"e:\\Tanfolyam\\Javascript\\Modulzáró\\vizsga-minta-master\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!e:\\Tanfolyam\\Javascript\\Modulzáró\\vizsga-minta-master\\src\\frontend.vue?vue&type=script&lang=js","dependencies":[{"path":"e:\\Tanfolyam\\Javascript\\Modulzáró\\vizsga-minta-master\\src\\frontend.vue","mtime":1528871782000},{"path":"e:\\Tanfolyam\\Javascript\\Modulzáró\\vizsga-minta-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1538115430289},{"path":"e:\\Tanfolyam\\Javascript\\Modulzáró\\vizsga-minta-master\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nvar fullpath='http://localhost:3000'  // in development mode\n// var fullpath='' // in production mode\nexport default {\n  name: 'app',\n  data() {\n    return {\n      keres : '',\n      hiba  : false,\n      view  : 'list',\n      thead : [\n        { key: 'tulajnev', label: 'Tulajdonos neve', sortable: true},\n        { key: 'tultel',   label: 'Tulajdonos telefonszáma'},\n        { key: 'allatnev', label: 'Állat neve', sortable: true},\n        { key: 'fajta',    label: 'Fajtája'},\n        { key: 'szule',    label: 'Születési éve', 'class': 'text-center' },\n        { key: 'veszolip', label: 'Utolsó oltás', sortable: true, 'class': 'text-center'},\n        { key: '_id',      label: 'Szerk. / Törl.', 'class': 'text-right'},\n      ],\n      tbody_origin: [],\n      form: {}\n    }\n  },\n  methods: {\n    csere() {\n      this.$set( this.form, 'tulajnev', this.form.allatnev )\n      this.$set( this.form, 'allatnev', '' )\n      let ivsi = setInterval( () => {\n        this.$refs.allnevi.focus()\n        clearInterval(ivsi)\n      }, 100 )\n    },\n    ment() {\n      if (this.form._id) {\n        this.axios\n            .post(fullpath+'/modify',this.form)\n            .then(resp => {\n              if (resp.data.n) {\n                this.view  = 'list'\n              } else {\n                this.hiba = true\n                let iv = setInterval( () => {\n                  this.hiba = false\n                  clearInterval(iv)\n                }, 1500 )\n              }\n            })\n      } else {\n        this.keres = this.form.allatnev\n        this.axios\n            .post(fullpath+'/',this.form)\n            .then(resp => {\n              if (resp.data._id) {\n                this.form._id = resp.data._id\n                this.tbody_origin.push(this.form)\n                this.view  = 'list'\n              } else {\n                this.hiba = true\n                let iv = setInterval( () => {\n                  this.hiba = false\n                  clearInterval(iv)\n                }, 1500 )\n              }\n            })\n      }\n    },\n    ujallat() {\n      this.form = {\n            szule: new Date().getYear()+1900,\n            veszolip: new Date()\n                    .toLocaleDateString('hu-HU')\n                    .split('.')\n                    .map( v=>v.trim() )\n                    .slice(0,3)\n                    .join('-')\n      }\n      this.form.allatnev=this.keres\n      this.view='uja'\n      let ivsi = setInterval( () => {\n        this.$refs.tulnevi.focus()\n        clearInterval(ivsi)\n      }, 100 )\n\n    },\n    keresenter() {\n      if (this.tbody.length === 0) this.ujallat()\n      else if (this.tbody.length === 1) this.edit(this.tbody[0]._id)\n    },\n    edit(x) {\n      if ( this.tbody_origin.find( v => v._id == x) ) {\n        this.form = this.tbody_origin.find( v => v._id == x)\n        this.view='uja'\n      }\n    },\n    del(x) {\n      this.axios\n          .post(fullpath+'/del',{id: x})\n          .then( resp => {\n            if (resp.data.ok) {\n              this.tbody_origin =\n              this.tbody_origin.map( v => (v._id == x) ? (v._id = '', v) : v )\n              this.tbody_origin.sort( (a,b) => b._id.localeCompare(a._id) )\n              this.tbody_origin.pop()\n              this.tbody_origin.sort( (a,b) => a.tulajnev.localeCompare(b.tulajnev) )\n              this.keres=''\n            } else {\n              this.hiba = true\n              let iv = setInterval( () => {\n                this.hiba = false\n                clearInterval(iv)\n              }, 1500 )\n            }\n          } )\n    }\n  },\n  computed: {\n    flist() {\n      let fajtaset = new Set()\n      this.tbody_origin.forEach( v=>\n        fajtaset.add(v.fajta)\n      )\n      let fajtalist = []\n      fajtaset.forEach( v => fajtalist.push(v) )\n      fajtalist.sort( (a,b) => a.localeCompare(b) )\n      return fajtalist\n    },\n    tbody() {\n      let kt = new RegExp(this.keres,'i')\n      return this\n              .tbody_origin\n              .filter( v =>\n                  kt.test(v.allatnev)  ||  kt.test(v.tulajnev)  ||  kt.test(v.fajta)\n              )\n              .slice(0,10)\n    }\n  },\n  mounted() {\n    this.axios\n        .get(fullpath+'/alldata')\n        .then( resp => this.tbody_origin = resp.data.sort(\n          (a, b) => a.tulajnev.localeCompare(b.tulajnev)\n        ) )\n  }\n}\n",{"version":3,"sources":["frontend.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"frontend.vue","sourceRoot":"src","sourcesContent":["<template>\n  <div id=\"app\">\n    <div v-show=\"view==='list'\">\n        <b-navbar variant=\"dark\" type=\"dark\">\n          <b-navbar-nav href=\"#\">\n            <b-btn variant=\"light\"\n                   @click=\"ujallat\">Új állat felvétele</b-btn>\n          </b-navbar-nav>\n          <b-nav-form action=\"#\">\n              <b-form-input\n                   class=\"mr-sm-2\"\n                   type=\"text\"\n                   placeholder=\"Keres - állat vagy tulajdonos\"\n                   v-model=\"keres\"\n                   @click.native=\"keres=''\"\n                   @keyup.native.enter=\"keresenter\"/>\n          </b-nav-form>\n        </b-navbar>\n    </div>\n    <div v-show=\"view==='uja' || view==='edit'\">\n        <b-navbar variant=\"dark\" type=\"dark\">\n          <b-navbar-nav href=\"#\">\n            <b-btn variant=\"light\"\n                   @click=\"view='list'\">Vissza a listához</b-btn>\n          </b-navbar-nav>\n        </b-navbar>\n    </div>\n    <div id=\"body\">\n        <div class=\"text-center cim\">Körzeti kötelező oltás - nyilvántartás</div>\n        <h5 class=\"text-center kerek\">Kukutyin</h5>\n        <div style=\"height:4px;\"></div>\n        <div v-show=\"view==='list' && tbody.length\" class=\"kerek\">\n          <div style=\"height:13px;\"></div>\n          <b-table striped dark\n                   :fields=\"thead\"\n                   :items=\"tbody\">\n                   <template slot=\"_id\" slot-scope=\"data\">\n                        <b-btn size=\"sm\"\n                               @click=\"edit(`${data.value}`)\"\n                               variant=\"success\">módosít</b-btn>\n                        /\n                        <b-btn size=\"sm\"\n                               @click=\"del(`${data.value}`)\"\n                               variant=\"danger\">töröl</b-btn>\n                   </template>\n          </b-table>\n        </div>\n        <div v-show=\"!tbody.length  && view==='list'\"\n             class=\"text-center\"><br>\n             <div v-if=\"tbody_origin.length\" class=\"red\">\n               Nincs az adatbázisban a keresési feltételnek megfelelő állat!\n             </div>\n             <div v-if=\"!tbody_origin.length\" class=\"red\">\n               Az adatbázis üres!\n             </div>\n             <br><br>\n          <b-btn variant=\"danger\"\n                 @click=\"ujallat\">Új állat felvétele</b-btn>\n        </div>\n        <div class=\"row\" v-show=\"view==='uja' || view==='edit'\">\n          <div class=\"col\"></div>\n          <div class=\"col\">\n            <hr>\n            <h5 class=\"text-center\" v-if=\"!form._id\">Új állat felvétele</h5>\n            <h5 class=\"text-center\" v-if=\"form._id\">Adatmódosítás</h5>\n            <hr>\n            <b-form name=\"f1\">\n            Állat neve\n            <div class=\"row\">\n              <div class=\"col\">\n                <b-input placeholder=\"Állat neve\" required\n                         ref=\"allnevi\" v-model=\"form.allatnev\" />\n              </div>\n              <div v-if=\"form.allatnev && !form.tulajnev\">\n                <b-btn @click=\"csere\">&#8675;</b-btn>\n              </div>\n            </div>\n            Tulajdonos neve\n\n            <b-input ref=\"tulnevi\" required\n                     placeholder=\"Tulajdonos neve\"\n                     v-model=\"form.tulajnev\" />\n            Tulajdonos telefonszáma\n            <b-input placeholder=\"Tulajdonos telefonszáma\" required\n                     v-model=\"form.tultel\" />\n            Fajta\n            <b-input list=\"fajta\"\n                     placeholder=\"Fajája\"\n                     required\n                     v-model=\"form.fajta\" />\n            <datalist id=\"fajta\">\n              <option v-for=\"fajta in flist\">{{fajta}}</option>\n            </datalist>\n            Születési év\n            <b-input list=\"fajta\" type=\"number\" min=\"1980\"\n                     :max=\"new Date().getYear()+1900\"\n                     v-model=\"form.szule\" />\n            Veszettségi oltás dátuma\n            <b-input type=\"date\" list=\"fajta\"\n                     v-model=\"form.veszolip\" />\n            </b-form>\n            <hr>\n            <div class=\"text-center\">\n                <b-btn v-if=\"form.allatnev && form.tulajnev && form.fajta\"\n                       @click='ment'>Mentés</b-btn>\n            </div>\n          </div>\n          <div class=\"col\"></div>\n        </div>\n      </div>\n      <div v-if=\"hiba\" class=\"text-center red\">\n        Hálózati hiba, a módosításokat nem sikerült menteni!\n      </div>\n  </div>\n</template>\n\n<script>\nvar fullpath='http://localhost:3000'  // in development mode\n// var fullpath='' // in production mode\nexport default {\n  name: 'app',\n  data() {\n    return {\n      keres : '',\n      hiba  : false,\n      view  : 'list',\n      thead : [\n        { key: 'tulajnev', label: 'Tulajdonos neve', sortable: true},\n        { key: 'tultel',   label: 'Tulajdonos telefonszáma'},\n        { key: 'allatnev', label: 'Állat neve', sortable: true},\n        { key: 'fajta',    label: 'Fajtája'},\n        { key: 'szule',    label: 'Születési éve', 'class': 'text-center' },\n        { key: 'veszolip', label: 'Utolsó oltás', sortable: true, 'class': 'text-center'},\n        { key: '_id',      label: 'Szerk. / Törl.', 'class': 'text-right'},\n      ],\n      tbody_origin: [],\n      form: {}\n    }\n  },\n  methods: {\n    csere() {\n      this.$set( this.form, 'tulajnev', this.form.allatnev )\n      this.$set( this.form, 'allatnev', '' )\n      let ivsi = setInterval( () => {\n        this.$refs.allnevi.focus()\n        clearInterval(ivsi)\n      }, 100 )\n    },\n    ment() {\n      if (this.form._id) {\n        this.axios\n            .post(fullpath+'/modify',this.form)\n            .then(resp => {\n              if (resp.data.n) {\n                this.view  = 'list'\n              } else {\n                this.hiba = true\n                let iv = setInterval( () => {\n                  this.hiba = false\n                  clearInterval(iv)\n                }, 1500 )\n              }\n            })\n      } else {\n        this.keres = this.form.allatnev\n        this.axios\n            .post(fullpath+'/',this.form)\n            .then(resp => {\n              if (resp.data._id) {\n                this.form._id = resp.data._id\n                this.tbody_origin.push(this.form)\n                this.view  = 'list'\n              } else {\n                this.hiba = true\n                let iv = setInterval( () => {\n                  this.hiba = false\n                  clearInterval(iv)\n                }, 1500 )\n              }\n            })\n      }\n    },\n    ujallat() {\n      this.form = {\n            szule: new Date().getYear()+1900,\n            veszolip: new Date()\n                    .toLocaleDateString('hu-HU')\n                    .split('.')\n                    .map( v=>v.trim() )\n                    .slice(0,3)\n                    .join('-')\n      }\n      this.form.allatnev=this.keres\n      this.view='uja'\n      let ivsi = setInterval( () => {\n        this.$refs.tulnevi.focus()\n        clearInterval(ivsi)\n      }, 100 )\n\n    },\n    keresenter() {\n      if (this.tbody.length === 0) this.ujallat()\n      else if (this.tbody.length === 1) this.edit(this.tbody[0]._id)\n    },\n    edit(x) {\n      if ( this.tbody_origin.find( v => v._id == x) ) {\n        this.form = this.tbody_origin.find( v => v._id == x)\n        this.view='uja'\n      }\n    },\n    del(x) {\n      this.axios\n          .post(fullpath+'/del',{id: x})\n          .then( resp => {\n            if (resp.data.ok) {\n              this.tbody_origin =\n              this.tbody_origin.map( v => (v._id == x) ? (v._id = '', v) : v )\n              this.tbody_origin.sort( (a,b) => b._id.localeCompare(a._id) )\n              this.tbody_origin.pop()\n              this.tbody_origin.sort( (a,b) => a.tulajnev.localeCompare(b.tulajnev) )\n              this.keres=''\n            } else {\n              this.hiba = true\n              let iv = setInterval( () => {\n                this.hiba = false\n                clearInterval(iv)\n              }, 1500 )\n            }\n          } )\n    }\n  },\n  computed: {\n    flist() {\n      let fajtaset = new Set()\n      this.tbody_origin.forEach( v=>\n        fajtaset.add(v.fajta)\n      )\n      let fajtalist = []\n      fajtaset.forEach( v => fajtalist.push(v) )\n      fajtalist.sort( (a,b) => a.localeCompare(b) )\n      return fajtalist\n    },\n    tbody() {\n      let kt = new RegExp(this.keres,'i')\n      return this\n              .tbody_origin\n              .filter( v =>\n                  kt.test(v.allatnev)  ||  kt.test(v.tulajnev)  ||  kt.test(v.fajta)\n              )\n              .slice(0,10)\n    }\n  },\n  mounted() {\n    this.axios\n        .get(fullpath+'/alldata')\n        .then( resp => this.tbody_origin = resp.data.sort(\n          (a, b) => a.tulajnev.localeCompare(b.tulajnev)\n        ) )\n  }\n}\n</script>\n\n<style>\n@import url('https://fonts.googleapis.com/css?family=BioRhyme+Expanded|Slabo+27px');\n#body {\n  margin:20px;\n  font-family: 'Slabo 27px', serif;\n}\n.cim {\n  font-family: 'BioRhyme Expanded', serif;\n  font-size: 30px;\n  text-shadow: 1px 1px 4px;\n}\n.kerek {\n  margin:6px;\n  padding:13px;\n  background-color: #000;\n  color:white;\n  box-shadow: 1px 1px 5px #000;\n  border-radius: 10px;\n}\n.red {\n  color:#cf3443;\n  background-color: #daeeec;\n  font-weight: bolder;\n  margin: 20px;\n  padding: 10px;\n  box-shadow: 1px 1px 5px #000;\n  border-radius: 10px;\n}\n</style>\n"]}]}